<!DOCTYPE HTML>
<html>
  <head>
		<meta charset="UTF-8">
		<title></title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
 
  </head>
  
  <body style="padding:0;margin:0;overflow: hidden;">
  	
  	<canvas style="border-bottom:1px solid #ccc;" height="240" id="myCanvas" ></canvas>
    <button onclick="clearcanvas()">清空</button><br>
    <span>字体大小：</span>
    <select id="myselect">
    	<option value="1">1</option>	
    	<option value="2">2</option>	
    	<option value="3">3</option>	
    	<option value="4">4</option>	
    	<option value="5">5</option>	
    	<option value="6">6</option>	
    </select>
    <script>
    	console.log(document.body.clientWidth);
    		var pagewidth = document.body.clientWidth;
    		var pageheight = pagewidth*2/3;
    		var c=document.getElementById("myCanvas");
    		c.setAttribute("width",pagewidth);
    		c.setAttribute("height",pageheight);
				var ctx=c.getContext("2d");
				var img = new Image();
				img.src="img/back.jpg";
				img.onload = function(){
					ctx.drawImage(img, 0, 0);
				}
		    var t_start_x = 0;
		    var t_start_y = 0;
		    var startmove = false;
				document.addEventListener('touchstart',start, false);
		    document.addEventListener('touchmove',move, false);
		    document.addEventListener('touchend',end, false);
		    function end(){
		    	startmove = false;
		    }
		    var linewidth = 1;
		    function start(event){
		    	linewidth = document.getElementById("myselect").value;
		    	event.preventDefault();
		    	if(!startmove){
			        var event = event || window.event;
			        t_start_x = event.touches[0].clientX;
			        t_start_y = event.touches[0].clientY;
		    				console.log(t_start_x,t_start_y);
		    				startmove = true;
		    	}
		    }
		    function move(event){
		    	event.preventDefault();
		    	if(startmove){
				        var event = event || window.event;
		            t_end_x = event.touches[0].clientX;
		            t_end_y = event.touches[0].clientY;
		    				console.log(t_start_x,t_start_y,t_end_x,t_end_y);
		    				
		    				ctx.beginPath();
								ctx.lineCap="round";
								ctx.lineWidth=linewidth;
								ctx.moveTo(t_start_x,t_start_y);
								ctx.lineTo(t_end_x,t_end_y);
								ctx.stroke();
								t_start_x = t_end_x;
								t_start_y = t_end_y;
		    	}
		    }
		    function clearcanvas(){
		    	ctx.drawImage(img, 0, 0);
		    }
    </script>
  </body>
</html>
